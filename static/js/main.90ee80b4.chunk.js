(this["webpackJsonpchurch-bulletin"]=this["webpackJsonpchurch-bulletin"]||[]).push([[0],{180:function(e,t,n){},594:function(e,t){},596:function(e,t){},606:function(e,t){},608:function(e,t){},61:function(e,t){},633:function(e,t){},635:function(e,t){},636:function(e,t){},642:function(e,t){},644:function(e,t){},662:function(e,t){},664:function(e,t){},676:function(e,t){},679:function(e,t){},683:function(e,t,n){},694:function(e,t,n){},695:function(e,t,n){},696:function(e,t,n){},697:function(e,t,n){},698:function(e,t,n){},699:function(e,t,n){},707:function(e,t,n){},708:function(e,t,n){},709:function(e,t,n){},710:function(e,t,n){},711:function(e,t,n){},712:function(e,t,n){},713:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(3),r=n.n(c),s=n(170),i=n.n(s),o=(n(180),n(10)),u=n(50),l=n(7),d=n.n(l),j=n(13),b=n(83),f=n.n(b),h=n(20),m="SET_COVER",O="SET_AGENDA",p="SET_ANNOUNCEMENTS",v="SET_LESSON",g="IS_LOADING",x="SET_BULLETIN",y="SET_ERROR_MSG",N="SET_USER",E="UNSET_USER",w="SET_TOKEN",S="UNSET_TOKEN",R=function(e){return{type:m,payload:e}},k=function(e){return{type:O,payload:e}},T=function(e){return{type:p,payload:e}},C=function(e){return{type:v,payload:e}},I=n(171),L=(new(n.n(I).a.STS)({}),n(172),function(){var e=7-h.DateTime.local().weekday;return h.DateTime.local().plus({days:e})}),A=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URLSearchParams(window.location.search),"0"!==(a=h.DateTime.local()).weekday&&(a=L()),e.prev=3,t({type:g,payload:!0}),e.next=7,f.a.get("https://7qseesv2jh.execute-api.us-east-2.amazonaws.com/default/churchBulletin",{headers:{"X-Api-Key":"".concat(n.get("key")),"Content-Type":"application/json"},params:{d:"".concat(a.toFormat("yyyy-MM-dd"))}});case 7:200===(c=e.sent).status?(c.data.cover.logo="/church-bulletin/oaktree.png",t((r=c.data,{type:x,payload:r}))):console.log(c.status," ",c.statusText," ",c),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),t({type:y,payload:"Please refresh to try again"});case 14:case"end":return e.stop()}var r}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=n(34),G=n(6),P=r.a.createContext(),_={agenda:null,announcements:null,cover:null,errMsg:null,isLoading:!0,lesson:null,token:null,user:null},Y=function(e,t){switch(t.type){case x:return Object(G.a)(Object(G.a)({},e),{},{cover:t.payload.cover,agenda:t.payload.agenda,announcements:t.payload.announcements,lesson:t.payload.lesson,isLoading:!1});case m:return Object(G.a)(Object(G.a)({},e),{},{cover:t.payload});case O:return Object(G.a)(Object(G.a)({},e),{},{agenda:t.payload});case p:return Object(G.a)(Object(G.a)({},e),{},{announcements:t.payload});case v:return Object(G.a)(Object(G.a)({},e),{},{lesson:t.payload});case g:return Object(G.a)(Object(G.a)({},e),{},{isLoading:t.payload});case y:return Object(G.a)(Object(G.a)({},e),{},{errMsg:t.payload});case N:return Object(G.a)(Object(G.a)({},e),{},{user:t.payload});case E:return Object(G.a)(Object(G.a)({},e),{},{user:null});case w:return Object(G.a)(Object(G.a)({},e),{},{token:t.payload});case S:return Object(G.a)(Object(G.a)({},e),{},{token:null});default:return e}},B=function(e){var t=Object(c.useContext)(P).state;return e?e(t):t},F=function(){return Object(c.useContext)(P).dispatch},U=function(e){var t=Object(c.useReducer)(Y,_),n=Object(D.a)(t,2),r={state:n[0],dispatch:n[1]};return Object(a.jsx)(P.Provider,{value:r,children:e.children})},K=(n(683),"SPECIAL"),W="OPENING",q="CLOSING",H="SONG",J="SPEAKER",Q="PRAYER",V="TESTIMONY",z="SACRAMENT",X="PRESIDING",Z="CONDUCTING",$="CHORISTER",ee="ORGANIST",te={GENERAL:"GENERAL",PRIMARY:"PRIMARY",YMYW:"YMYW",ELDERS:"ELDERS",RS:"RS",MISSIONARIES:"MISSIONARIES"},ne=function(e,t){return t.find((function(t){return t.type.includes(K)&&e.split("-")[1]===t.order}))},ae=function(e){var t=B().agenda;if(!t)return Object(a.jsx)(a.Fragment,{});var n,c,r=e.item.charAt(0)+e.item.slice(1).toLowerCase()+":",s="";switch(e.item){case X:case Z:case $:case ee:n=t[e.item.toLowerCase()];break;case J:n=(c=e.type,t.speakers.find((function(e){return e.order===c}))).name;break;case Q:n=function(e,t){return t.find((function(t){return t.type===e}))}(e.type,t.prayers).name,e.type===W&&(r="Invocation"),e.type===q&&(r="Benediction");break;case z:case V:r="",n="",s=e.item===V?Object(a.jsx)("div",{className:"agenda-item-title",children:Object(a.jsx)("strong",{children:"Sharing of Testimonies"})}):Object(a.jsx)("div",{className:"agenda-item-title",children:Object(a.jsx)("strong",{children:"Administration of the Sacrament"})});break;case H:var i=function(e,t){return e.includes(K)?ne(e,t):t.find((function(t){return t.type===e}))}(e.type,t.songs);if(e.type.includes(K)){r=i.desc,s=Object(a.jsx)("div",{className:"agenda-item-title",children:i.title}),n=i.number;break}r=e.type.charAt(0)+e.type.slice(1).toLowerCase()+" Song:",n=i.number,s=Object(a.jsx)("div",{className:"agenda-item-title",children:i.title})}return Object(a.jsxs)("div",{className:"agenda-item-container",children:[Object(a.jsxs)("div",{className:"agenda-item-label-value",children:[Object(a.jsx)("div",{className:"agenda-item-label",children:r}),Object(a.jsx)("div",{className:"agenda-item-value",children:n})]}),s]})},ce=function(){var e=B().agenda,t=F();if(Object(c.useEffect)((function(){null===e&&function(){var e=Object(j.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void(e.next=2);case 2:(n=e.sent).error?console.log("unable to get the latest agenda"):t(k(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),!e)return Object(a.jsx)(a.Fragment,{});var n=e.order.map((function(e,t){return Object(a.jsx)(ae,{item:e.item,type:e.type},e.item+e.type+t)}));return Object(a.jsxs)("div",{className:"agenda-container",children:[Object(a.jsx)("h2",{children:"Agenda"}),Object(a.jsxs)("div",{className:"agenda-whos-who",children:[Object(a.jsx)(ae,{item:X}),Object(a.jsx)(ae,{item:Z}),Object(a.jsx)(ae,{item:$}),Object(a.jsx)(ae,{item:ee})]}),n]})},re=function(){var e={};return e[te.GENERAL]="General",e[te.YMYW]="Young Men/Young Women",e[te.PRIMARY]="Primary",e[te.ELDERS]="Elders",e[te.RS]="Relief Society",e[te.MISSIONARIES]="Missionaries",e},se=n(51),ie=n.n(se),oe=n(52),ue=n.n(oe),le=function(e){if(!e.announcements||0===e.announcements.length)return Object(a.jsx)(a.Fragment,{});var t=e.announcements.map((function(t,n){return e.type!==t.type?Object(a.jsx)(a.Fragment,{}):Object(a.jsx)("div",{className:"announcement",children:ue()(ie()(t.message))},n)}));return Object(a.jsxs)("div",{className:"announcement-section",children:[Object(a.jsx)("div",{className:"announcement-heading",children:Object(a.jsx)("strong",{children:re()[e.type]})}),t]})},de=(n(694),function(){var e=B().announcements,t=F();if(Object(c.useEffect)((function(){null===e&&function(){var e=Object(j.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void(e.next=2);case 2:(n=e.sent).error?console.log("unable to get latest announcements."):t(T(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),!e)return Object(a.jsx)(a.Fragment,{});var n=Object.values(te).map((function(t,n){var c=function(e,t){return t.messages.filter((function(t){return t.type===e}))}(t,e);return Object(a.jsx)(le,{type:t,announcements:c},t+n)}));return Object(a.jsxs)("div",{className:"announcements-container",children:[Object(a.jsx)("h2",{children:"Announcements"}),n]})}),je=(n(695),function(){var e=B().cover,t=F();if(Object(c.useEffect)((function(){var n=function(){var e=Object(j.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:(n=e.sent).error?console.log("unable to get latest cover"):t(R(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();null===e&&n()}),[]),Object(c.useEffect)((function(){var e=function(){document.getElementsByClassName("cover-image")[0].style.top=.4*window.pageYOffset+"px",document.getElementsByClassName("cover-header")[0].style.top=window.pageYOffset/.85+"px"};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}})),null===e)return Object(a.jsx)(a.Fragment,{});var n=h.DateTime.fromISO(e.date).toFormat("MMM d, yyyy"),r=null;return e.imgAlign&&(r={left:e.imgAlign}),Object(a.jsxs)("div",{className:"cover-container",children:[Object(a.jsxs)("div",{className:"cover-header",children:[Object(a.jsx)("img",{src:e.logo,alt:"logo",id:"logo"}),Object(a.jsx)("h1",{children:e.name}),Object(a.jsx)("h2",{children:e.type}),Object(a.jsx)("div",{className:"cover-date",children:n})]}),Object(a.jsx)("div",{className:"cover-image-container",children:Object(a.jsx)("img",{className:"cover-image",src:e.image,alt:"",height:window.innerHeight,style:r})})]})}),be=(n(696),function(){var e=B().lesson,t=F();return Object(c.useEffect)((function(){var e=function(e){var t=document.getElementsByClassName("lesson-content")[0],n=document.getElementsByClassName("lesson-container")[0].getBoundingClientRect(),a=document.getElementsByClassName("lesson-image")[0];n.top<window.innerHeight&&(t.style.top=.5*n.top+"px",a.style.transform="scale(".concat(n.top/1e3+1.5,")"))};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}})),Object(c.useEffect)((function(){null===e&&function(){var e=Object(j.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void(e.next=2);case 2:(n=e.sent).error?console.log("unable to get the latest agenda"):t(C(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),null===e?Object(a.jsx)(a.Fragment,{}):Object(a.jsxs)("div",{className:"lesson-container",children:[Object(a.jsx)("div",{className:"lesson-image-container",children:Object(a.jsx)("img",{src:e.imgURL,className:"lesson-image",alt:""})}),Object(a.jsxs)("div",{className:"lesson-content",children:[Object(a.jsx)("h2",{children:e.header}),Object(a.jsx)("div",{className:"lesson-block",children:e.block}),Object(a.jsx)("div",{className:"lesson-title",children:ue()(ie()(e.title))})]})]})}),fe=(n(697),function(){var e=B().errMsg,t=void 0!==e?e:"Loading...";return Object(a.jsxs)("div",{className:"waiting",children:[Object(a.jsx)("img",{src:"/church-bulletin/christuslogo.png",alt:"logo",className:"rotate"}),Object(a.jsx)("p",{children:t})]})}),he=(n(698),function(){var e=B().isLoading,t=F();return Object(c.useEffect)((function(){(function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),!1===e?Object(a.jsxs)("div",{className:"program-container",children:[Object(a.jsx)(je,{}),Object(a.jsx)(ce,{}),Object(a.jsx)(be,{}),Object(a.jsx)(de,{}),Object(a.jsx)("div",{className:"contact",children:"For additions/changes to the bulletin please text Bro. Nick Graves"})]}):Object(a.jsx)(fe,{})}),me=(n(699),function(){var e=F(),t=Object(o.f)();return Object(c.useEffect)((function(){var n=function(n){e({type:N,payload:n}),e({type:S}),t.push("/dashboard")};window.gapi.load("auth2",(function(){window.gapi.auth2.init({client_id:"877425478598-b7fsqjtjeon0n1nkjn3kqrhdoco82lhi.apps.googleusercontent.com"}).then((function(){window.gapi.signin2.render("my-g-signin",{scope:"profile email",width:200,height:40,longtitle:!1,theme:"dark",onsuccess:n})})).catch((function(e){throw new Error("Unable to authenticate through google. Please try again later")}))}))}),[]),Object(a.jsxs)("div",{className:"login-page",children:[Object(a.jsx)("div",{className:"login-page-header",children:"Please login with your google account to manage your bulletin"}),Object(a.jsx)("div",{id:"my-g-signin"})]})}),Oe=n(174),pe=function(e){var t=e.component,n=Object(Oe.a)(e,["component"]),c=B().user;return c&&function(e){if(null===e)return!1;if(e.getAuthResponse().expires_at){var t=h.DateTime.fromMillis(e.getAuthResponse().expires_at);if(h.DateTime.local()<t)return!0}}(c),Object(a.jsx)(o.a,Object(G.a)(Object(G.a)({},n),{},{render:function(e){return Object(a.jsx)(t,Object(G.a)({},e))}}))},ve=(n(707),n(708),function(e){var t=Object(c.useState)(!1),n=Object(D.a)(t,2),r=n[0],s=n[1],i="dashboard-tile";i=e.data.published?i+" published":i+" unpublished";var o=e.data.published?"LIVE":"IN PROGRESS",u=function(){s(!r)};return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:i+(r?" show-reverse":""),style:r?{}:{transitionDelay:".3s"},children:[Object(a.jsx)("div",{className:"status",onClick:function(){return u()},children:o}),Object(a.jsx)("div",{className:"date",children:e.data.date}),Object(a.jsx)("button",{onClick:function(){},children:Object(a.jsx)("img",{src:"/church-bulletin/edit_icon.svg",alt:"",height:"25",width:"25"})})]}),Object(a.jsxs)("div",{className:"dashboard-tile reverse"+(r?" show-reverse":""),onClick:function(){return u()},style:r?{transitionDelay:".3s"}:{},children:[Object(a.jsx)("button",{children:"Update Status"}),Object(a.jsx)("button",{className:"destroy",children:"Delete"})]})]})}),ge=(n(709),function(e){return null===e.data?Object(a.jsx)("div",{children:"Loading..."}):Object(a.jsx)("div",{className:"dashboard-container",children:e.data.map((function(e){return Object(a.jsx)(ve,{data:e})}))})}),xe=(n(710),function(){return Object(a.jsx)("div",{children:"Bulletin"})}),ye=(n(711),function(){return Object(a.jsx)("div",{children:"QR Generator"})}),Ne=(n(712),function(e){var t=["Dashboard","Create Bulletin","Generate QR Code"];return Object(a.jsx)("div",{className:"nav-container",children:t.map((function(t,n){var c="nav-button";return e.navSelected===n&&(c+=" nav-selected"),Object(a.jsx)("button",{className:c,onClick:function(){return e.handleNav(n)},children:t},n)}))})}),Ee=function(){var e=B(),t=(e.user,e.token,F(),Object(c.useState)(0)),n=Object(D.a)(t,2),r=n[0],s=n[1];return Object(a.jsxs)("div",{className:"admin-container",children:[Object(a.jsx)(Ne,{handleNav:function(e){s(e)},navSelected:r}),function(){switch(r){case 0:return Object(a.jsx)(ge,{data:[{date:"2020-11-22",published:!0},{date:"2020-11-29",published:!1},{date:"2020-12-06",published:!1}]});case 1:return Object(a.jsx)(xe,{});case 2:return Object(a.jsx)(ye,{});default:return Object(a.jsx)(ge,{})}}()]})},we=function(){var e=Object(a.jsx)("div",{className:"app",children:Object(a.jsxs)(o.c,{children:[Object(a.jsx)(o.a,{path:"/",exact:!0,component:he}),Object(a.jsx)(o.a,{path:"/login",exact:!0,component:me}),Object(a.jsx)(pe,{path:"/dashboard",exact:!0,component:Ee})]})});return Object(a.jsx)(u.a,{children:e})},Se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,714)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(U,{children:Object(a.jsx)(we,{})})}),document.getElementById("root")),Se()}},[[713,1,2]]]);
//# sourceMappingURL=main.90ee80b4.chunk.js.map